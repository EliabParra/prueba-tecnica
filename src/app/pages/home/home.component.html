<div class="home-dashboard">
	<mat-toolbar color="primary" class="dashboard-toolbar">
		<span class="toolbar-title">Dashboard</span>
		<span class="spacer"></span>
		<button
      mat-flat-button
      (click)="openDashboardBottomSheet()"
    >
      <mat-icon>add</mat-icon> Nuevo
    </button>
	</mat-toolbar>

	<div class="stats-row" *ngIf="stats$ | async as stats">
		<mat-card class="stat-card" *ngFor="let s of stats">
			<div class="stat-card-content">
				<div class="stat-icon"><mat-icon>{{s.icon}}</mat-icon></div>
				<div class="stat-info">
					<div class="stat-value">{{s.value}}</div>
					<div class="stat-label">{{s.label}}</div>
				</div>
			</div>
		</mat-card>
	</div>

	<div class="main-area">
		<section class="main-left">
			<mat-card class="large-card">
				<mat-card-header>
					<mat-card-title>Stock por categoría</mat-card-title>
					<mat-card-subtitle>Distribución de stock</mat-card-subtitle>
				</mat-card-header>
				<mat-card-content>
					<mat-card class="chart">
						<mat-card-content>
							<canvas #warehousesChart></canvas>
						</mat-card-content>
					</mat-card>
				</mat-card-content>
			</mat-card>
		</section>

		<aside class="main-right">
			<mat-card class="side-card">
				<mat-card-header>
					<mat-card-title>Movimientos recientes de inventario</mat-card-title>
				</mat-card-header>
				<mat-card-content>
					<mat-list>
						<mat-list-item *ngFor="let item of recentMovements; let last = last">
							<div mat-line>#{{ item.movementNumber }}</div>
							<div mat-line class="secondary">{{ formatMovement(item) }}</div>
							<mat-divider *ngIf="!last"></mat-divider>
						</mat-list-item>
						<mat-list-item *ngIf="!recentMovements.length">
							<div mat-line>No hay movimientos recientes</div>
						</mat-list-item>
					</mat-list>
				</mat-card-content>
			</mat-card>
		</aside>
	</div>
</div>
